<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <body>
    <hr style="border: 2px solid rgb(3, 199, 90)">
    <br />
    <br />
    <div style="justify-content: center">
      <div style="margin: 100px; display: flex; justify-content: space-between">
        <main style="width: 48%">
          <div style="width: max-content">
            <div>Woori Calendar</div>
            <br />
            <br />
            <p>
              <b th:text="${data.receiver}">test@woori.com</b> 님, 안녕하세요<br /><br />
              <b th:text="${data.sender}"></b> 님께서<br />
              <b th:text="${data.name}">'우리 공유 캘린더'</b> 라는 woori calendar에 대한<br />
              <b th:text="${data.grade}"></b> 권한을 부여했음을 알려드립니다.<br />
              <span id="tokenValue" th:text="${data.token}"></span>

              이 캘린더를 다른 캘린더에 추가한 후<br />
              언제든지 숨기거나 완전히 삭제할 수 있습니다.
            </p>
            <br />
            <a href="http://localhost:8080"><button type="submit" margin-right: 10px onClick="handleAccept()">수락</button></a>
            <button type="submit">거절</button>
            <br />
          </div>
        </main>
        <aside style="width: 48%">
          <di style="width: max-content">
            <img src="cid:logo" style="width: 300px" />
          </di>
        </aside>
      </div>
    </div>

    <hr style="border: 2px solid rgb(3, 199, 90)" />
    <div align="center">
      <sapn>Copyright &copy; Woori Calendar</sapn>
    </div>
  </body>
</html>

<script>
  var token = $('#tokenValue').text();
  console.log(token);

  var data = {
    "calNo":"83",
    "email":"wys9049@naver.com",
    "checked":true,
    "grade":"1"
  };

  function handleAccept() {
      // AJAX 요청을 보냅니다.
      $.ajax({
          type: 'POST',
          url: 'http://localhost:8080/share', // 실제 서버 엔드포인트 URL로 변경해야 합니다.
          headers: { Authorization: token },
          contentType: 'application/json',
          data: JSON.stringify(data),
          success: function(response) {
              // 요청이 성공적으로 처리되었을 때 수행할 동작을 정의합니다.
              console.log(response);
              // 서버로부터 받은 JSON 형태의 응답을 처리합니다.
          },
          error: function(error) {
              // 요청이 실패했을 때 수행할 동작을 정의합니다.
              console.error(error);
              console.error(url);
              // 에러 처리를 수행합니다.
          }
      });
  }
</script>